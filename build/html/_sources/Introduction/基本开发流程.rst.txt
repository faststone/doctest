.. _doc-GRIP:

基本开发流程
=================

开发流程框图
+++++++++++++++++

在对Smartof模组进行二次开发时，一般的开发流程图如下

.. image:: image/modulesdev.png

开发流程说明
+++++++++++++++++

模组基本性能评估
------------------

在获得SmartToF模组后，可以先使用SDK中相关平台下tools目录中的SmartToFViewer工具来采集显示被测物体，
评估被测物体的成像效果、深度距离等信息。通过调节SmartToFViewer上的相关参数后的结果，作为对于SmartToF模组
成像和测量能力的基本依据。SDK中提供了SmartToF_PCLViewer.exe

模组样例集成开发
-----------------

经过SmartToFViewer的简单使用评估后，用户可以按照SDK中的样例说明运行相关的样例，了解各平台和不同开发语言环境
下使用SDK中主要步骤，参考SDK的相关样例代码，相关代码中的API参数可以阅读文档中的详细扩展说，编写集成自己的测
试样例进行模组数据的采集和显示。

* C/C++的用户参考 :ref:`C/C++<tutorialc>` 的相关样例和编译运行C/C++样例的方法。
* Python用户参考 :ref:`Python<tutorialpython>` 的相关样例和运行样例方法。
* Java用户参考 :ref:`Java<tutorialjava>` 的basic和basicUI样例以及运行样例的方法。
* C#用户参考 :ref:`C#<tutorialcsharp>` 的basic和basicUI样例以及运行样例的方法。

模组算法评估开发
-------------------

为了方便快速使用smarttof模组进行算法开发，SmartToF SDK提供了一套完整的开发使用流程说明，通过将流程分为四个阶段，
每一阶段的成果作为下一阶段的准备，最后整合到用户自己相关的平台中。

录像文件获取
^^^^^^^^^^^^^^^^

在进行算法评估时，首先是要获得准确的图像数据。针对前期没有模组或者不确定采集的图像数据是否正确的情况下，
可以先期通过smarttofviewer的录像功能获取，也可以通过dmcam-cli工具的rx命令采集，如何使用Smarttofviewer的录像功能录制录像文件
和使用dmcam-cli工具的rx命令采集保存录像文件参考扩展说明中的工具详细说明。

离线算法评估
^^^^^^^^^^^^^^^

即使暂时没有SmartToF系列模组，用户也可以预先在录像文件上进行算法的验证。通过读取原始录像文件数据，加载运行要评估的算法进行运行，
再查看加入算法后的实际效果。如要对原始深度数据进行滤波，可以加入常用的中值或者双边滤波，也可以是改进后的深度滤波，通过滤波前后的图像效果评估算法效果。
这种离线算法评估解决了部分用户在没有模组或者未能正常采集模组数据的情况下，提前进入到算法的相关评估工作。


在线算法评估
^^^^^^^^^^^^^^^
通过前期在离线录像文件上的算法评估后，基本确定算法的功能和效果，评估算法是否能够达到设计要求。实现离线文件评估后，
下一步就是动态的实际评估算法的效果。通过在应用中采集SmartToF模组的实时数据，同时加入前面离线评估的算法处理，
实时观察和评测算法在pc上的实际效果，最终确定在SmartToF上使用的算法是否的确满足使用要求。

实际平台应用
^^^^^^^^^^^^^^^
前期的离线算法评估和在线算法评估基本上都是基于PC平台，在实际应用中，SmartToF模组可能运行在各种不同的嵌入式平台。
这时需要在对应得平台上运行相应的SmartToF的库，并且将前面的评估算法移植到对应得平台，并根据平台对算法进行相应的
优化，最后在实际的嵌入式平台上进行应用开发。